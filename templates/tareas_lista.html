{% extends "base.html" %}
{% block content %}
<main style="max-width:900px;margin:32px auto 0 auto;background:#fff;border-radius:18px;box-shadow:0 4px 24px #0ea5e91a;padding:32px 28px 24px 28px;">
  <div style="margin-bottom:18px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
    <h1 style="font-size:2em;color:#0ea5e9;margin:0;">Lista de tareas generales</h1>
  </div>
  <table style="width:100%;border-collapse:collapse;font-size:1.08em;">
    <thead>
      <tr style="background:#f1f5f9;color:#334155;">
    <th style="padding:10px 6px;text-align:left;">Icono</th>
    <th style="padding:10px 6px;text-align:left;">Nombre</th>
    <th style="padding:10px 6px;text-align:left;">Puntos</th>
    <th style="padding:10px 6px;text-align:left;">Premio (€)</th>
    <th style="padding:10px 6px;text-align:left;">Tiempo estimado</th>
    <th style="padding:10px 6px;text-align:left;">Descripción</th>
    <th style="padding:10px 6px;text-align:left;">Tag</th>
    <th style="padding:10px 6px;text-align:left;">Categoría</th>
      </tr>
    </thead>
    <tbody>
  {% for t in tareas_paginated %}
      <tr style="border-bottom:1px solid #e2e8f0;">
  <td style="padding:8px 6px;font-size:1.5em;">
          {% if t.icono %}
            <span>{{ t.icono|safe }}</span>
          {% else %}
            <span style="color:#64748b;">-</span>
          {% endif %}
        </td>
        <td style="padding:8px 6px;">{{ t.nombre }}</td>
        <td style="padding:8px 6px;">{{ t.puntuacion }}</td>
  <td style="padding:8px 6px;">{{ t.premio|floatformat:2 }}</td>
        <td style="padding:8px 6px;">{{ t.tiempo_estimado }} min</td>
        <td style="padding:8px 6px;max-width:220px;white-space:pre-line;">{{ t.descripcion }}</td>
        <td style="padding:8px 6px;">
          {% if t.tag %}
            <span style="background:#e0e7ef;color:#0ea5e9;padding:2px 8px;border-radius:8px;font-size:0.98em;">{{ t.tag }}</span>
          {% else %}
            <span style="color:#64748b;">-</span>
          {% endif %}
        </td>
        <td style="padding:8px 6px;">
          {% if t.categoria %}
            <span style="background:#f1f5f9;padding:2px 8px;border-radius:8px;">{{ t.categoria.nombre }}</span>
          {% else %}
            <span style="color:#64748b;">-</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7" style="text-align:center;color:#64748b;padding:18px;">No hay tareas registradas.</td></tr>
      {% endfor %}
    </tbody>
  </table>
  <div style="margin:18px 0 0 0;display:flex;justify-content:center;gap:8px;align-items:center;flex-wrap:wrap;">
    <span style="font-size:1.08em;font-weight:bold;">Total de tareas: {{ tareas_paginated.paginator.count }}</span>
    <a href="?page=1" class="btn{% if not tareas_paginated.has_previous %} disabled{% endif %}" {% if not tareas_paginated.has_previous %}tabindex="-1" aria-disabled="true" style="pointer-events:none;opacity:0.5;"{% endif %}>&#171; Inicio</a>
    {% if tareas_paginated.has_previous %}
      <a href="?page={{ tareas_paginated.previous_page_number }}" class="btn">&laquo; Anterior</a>
    {% else %}
      <a href="#" class="btn disabled" tabindex="-1" aria-disabled="true" style="pointer-events:none;opacity:0.5;">&laquo; Anterior</a>
    {% endif %}
    <span style="font-size:1.08em;">Página {{ tareas_paginated.number }} de {{ tareas_paginated.paginator.num_pages }}</span>
    {% if tareas_paginated.has_next %}
      <a href="?page={{ tareas_paginated.next_page_number }}" class="btn">Siguiente &raquo;</a>
    {% else %}
      <a href="#" class="btn disabled" tabindex="-1" aria-disabled="true" style="pointer-events:none;opacity:0.5;">Siguiente &raquo;</a>
    {% endif %}
    <a href="?page={{ tareas_paginated.paginator.num_pages }}" class="btn{% if not tareas_paginated.has_next %} disabled{% endif %}" {% if not tareas_paginated.has_next %}tabindex="-1" aria-disabled="true" style="pointer-events:none;opacity:0.5;"{% endif %}>Final &#187;</a>
  </div>
    </tbody>
  </table>
</main>
{% endblock %}
